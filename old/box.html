<!DOCTYPE HTML>
<html>
	<head>
		<title>canvas text height test</title>
		<style>
		</style>
	</head>
	<body>
		<div id="box" style="position: absolute; top: 100px; left: 50px; height: 10px; width: 50px; background-color: red;"></div>
	<script>
var box = document.getElementById('box'),
    boxPos = 50,
    boxVelocity = 5,
    limit = 300;

var input = {

	inputHandler: {
		_pressed: {},
		RIGHT: 39,
		LEFT: 37,

		isDown: function(keyCode) {
			return this._pressed[keyCode];
		},
		onKeydown: function(event) {
			this._pressed[event.keyCode] = true;
		},
		onKeyup: function(event) {
			delete this._pressed[event.keyCode];
		}
	},

	init: function() {
		window.addEventListener('keyup', function(event) { input.inputHandler.onKeyup(event);} , false);
		window.addEventListener('keydown', function(event) { input.inputHandler.onKeydown(event); }, false);
	}
};
	
function Player() {
	var _state = {};
	var _states = {
		moveLeft: function() {
			this.enter = function() {
				boxPos -= boxVelocity;
			};
		},
		moveRight: function() {
			this.enter = function() {
				boxPos += boxVelocity;
			};
		}
	};

	this.handleInput = function(input) {
		if (input.isDown(input.LEFT)) {
			console.log('left');
			return new _states.moveLeft();
		}
		else if (input.isDown(input.RIGHT)) {
			console.log('right;');
			return new _states.moveRight();
		}
		return null;
	};

	this.update = function(input) {
		var state = this.handleInput(input);
		if (state) {
			_state = state;
			_state.enter();
		}
	};
}

var player = new Player();

function update() {
	player.update(input.inputHandler);
}

function draw() {
    box.style.left = boxPos + 'px';
}


input.init();
mainLoop();

function mainLoop() {
    update();
    draw();
    requestAnimationFrame(mainLoop);
}


	</script>
	</body>
</html>